<?php/*Plugin Name: Woocommerce Bulk Featured Image ReplacerVersion: 1.0.0Description: This is the plugin to replace all the product feature images with category base.Author: Shourya ChowdhuryAuthor URI: http://codeartssolution.com/*/if (!defined('ABSPATH')) exit;include( plugin_dir_path( __FILE__ ) . 'replacer/img-replacer.php');if (!class_exists('Wbfir_Setting')) {	class Wbfir_Setting {		function __construct(){            add_action( 'admin_menu', array( $this, 'wbfir_admin_menu' ) );			add_action( 'admin_init', array( $this, 'wbfir_register_settings') );        }        //register option settings        function wbfir_register_settings() {        	//textfield option registered			add_option( 'wbfir_media_image_path', 'Media Image Path'); 		   	register_setting( 'wbfir_options_group', 'wbfir_media_image_path', 'wbfir_media_image_path_callback' );		   	//dropdown option registered		   	add_option( 'wbfir_product_cat', 'Category'); 		   	register_setting( 'wbfir_options_group', 'wbfir_product_cat', 'wbfir_product_cat_callback' );		   	//dropdown option registered		   	add_option( 'wbfir_replacer_index', 'Name'); 		   	register_setting( 'wbfir_options_group', 'wbfir_replacer_index', 'wbfir_replacer_index_callback' );					}		//create options page		function wbfir_admin_menu() {			add_menu_page(      				'Product Image Replacer',            //page title				'Product Image Replacer',    //menu title				'manage_options',       //capability				'wbfir_img_replacer',    // menu slug				array( $this, 'wbfir_settings_page' ), //callback function								'dashicons-image-crop' ,				     //dashicon icon				60                      			);			//add_menu_page, add_dashboard_page, add_options_page, 		}		//callback function for options		function  wbfir_settings_page() { ?>						<div class="sb-option-block">				<h2>Product Image Replacer Setting Panel</h2>				<p>You have to upload the images in the proper path and you have to define the path name in the path name box. Also you need to specify the category and the image name index. For expample: If you select the "Name" as the index then you should add the images inside the folder with the product name.</p>				<form method="post" action="options.php">					<?php settings_fields( 'wbfir_options_group' ); ?>					<table class="wbfir_table">						<tr>							<th>								<label for="wbfir_media_image_path">Image Path</label>							</th>							<td>								<input type="textarea" class="widefat" id="wbfir_media_image_path" name="wbfir_media_image_path" value="<?php echo get_option('wbfir_media_image_path'); ?>" />							</td>						</tr>						<tr>							<th>								<label for="wbfir_replacer_index">Image Indexer</label>							</th>							<td>								<select  class="widefat1" id="wbfir_replacer_index" name="wbfir_replacer_index">								  	<option value="Name" <?php if(get_option('wbfir_replacer_index') == 'Name') { ?> selected='selected' <?php } ?> >Name</option>								  	<option value="Id" <?php if(get_option('wbfir_replacer_index') == 'Id') { ?> selected='selected' <?php } ?> >Id</option>								  	<option value="Sku" <?php if(get_option('wbfir_replacer_index') == 'Sku') { ?> selected='selected' <?php } ?> >Sku</option>								  									</select>															</td>						</tr>						<tr>							<th>								<label for="wbfir_product_cat">Product Category</label>							</th>							<td>								<select  class="widefat1" id="wbfir_product_cat" name="wbfir_product_cat">								<!--Get All the product category and sub category-->																	<?php									  $taxonomy     = 'product_cat';									  $orderby      = 'name';  									  $show_count   = 0;      // 1 for yes, 0 for no									  $pad_counts   = 0;      // 1 for yes, 0 for no									  $hierarchical = 1;      // 1 for yes, 0 for no  									  $title        = '';  									  $empty        = 0;									  $args = array(									         'taxonomy'     => $taxonomy,									         'orderby'      => $orderby,									         'show_count'   => $show_count,									         'pad_counts'   => $pad_counts,									         'hierarchical' => $hierarchical,									         'title_li'     => $title,									         'hide_empty'   => $empty									  );									 $all_categories = get_categories( $args );									 foreach ($all_categories as $cat) {									    if($cat->category_parent == 0) {									        $category_id = $cat->term_id;    ?>									        <option value="<?php echo $category_id; ?>" <?php if(get_option('wbfir_product_cat') == $category_id) { ?> selected='selected' <?php } ?> ><?php echo $cat->name;?></option>									        echo '<br /><a href="'. get_term_link($cat->slug, 'product_cat') .'">'. $cat->name .'</a>';									        <?php									        $args2 = array(									                'taxonomy'     => $taxonomy,									                'child_of'     => 0,									                'parent'       => $category_id,									                'orderby'      => $orderby,									                'show_count'   => $show_count,									                'pad_counts'   => $pad_counts,									                'hierarchical' => $hierarchical,									                'title_li'     => $title,									                'hide_empty'   => $empty									        );									        $sub_cats = get_categories( $args2 );									        if($sub_cats) {									            foreach($sub_cats as $sub_category) { ?>									                <option value="<?php echo $sub_category->term_id; ?>" <?php if(get_option('wbfir_product_cat') == $sub_category->term_id) { ?> selected='selected' <?php } ?> >---<?php echo $sub_category->name;?></option>									            <?php }   									        }									    }       									}									?>									  									</select>								<?php $val1 = get_option('wbfir_product_cat'); ?>							</td>						</tr>					</table>					<div class="submit-btn">											<?php submit_button(); ?>					</div>				</form>			</div><!--option ends-->				<form action="<?php echo admin_url( 'admin-post.php' ); ?>">				<input type="hidden" name="action" value="wbfir_import">				<input type="hidden" name="import_bulk_replacer" value="run">				<?php submit_button( 'Run Importer' ); ?>				</form>					<?php }    }}//End of class not exists check$GLOBALS['Wbfir_Setting'] = new Wbfir_Setting(); ?>